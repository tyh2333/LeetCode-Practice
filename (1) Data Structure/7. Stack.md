[TOC]

## 1. Bracket Match

#### [20. Valid Parentheses](https://leetcode-cn.com/problems/valid-parentheses/)

Given a string `s` containing just the characters `'('`, `')'`, `'{'`, `'}'`, `'['` and `']'`, determine if the input string is valid.

An input string is valid if:

1. Open brackets must be closed by the same type of brackets.
2. Open brackets must be closed in the correct order.

**Example 1:**

```c++
Input: s = "()"
Output: true
```

```c++
class Solution {
public:
    stack<char> stk;
    unordered_map<char, char> mp;
    bool isValid(string s) {
        // if not even, can not match all brackets
        if(s.size() & 1) return false;
        mp['('] = ')';
        mp['{'] = '}';
        mp['['] = ']';
        for(int i = 0; i < s.size(); i++){
            if(!stk.empty() && s[i] == mp[stk.top()]){
                stk.pop();
            }
            else stk.push(s[i]);
        }
        // if every bracket matched stack will be empty();
        return stk.empty();
    }
};
```



#### [678. Valid Parenthesis String](https://leetcode-cn.com/problems/valid-parenthesis-string/)

Given a string `s` containing only three types of characters: `'('`, `')'` and `'*'`, return `true` *if* `s` *is **valid***.

The following rules define a **valid** string:

- Any left parenthesis `'('` must have a corresponding right parenthesis `')'`.
- Any right parenthesis `')'` must have a corresponding left parenthesis `'('`.
- Left parenthesis `'('` must go before the corresponding right parenthesis `')'`.
- `'*'` could be treated as a single right parenthesis `')'` or a single left parenthesis `'('` or an empty string `""`.

**Example 1:**

```
Input: s = "()"
Output: true
```

**Example 2:**

```
Input: s = "(*)"
Output: true
```

**Example 3:**

```
Input: s = "(*))"
Output: true
```

**Constraints:**

- `1 <= s.length <= 100`
- `s[i]` is `'('`, `')'` or `'*'`.

```c++
// normal bracket match only need to record left_bracet num, return left_bracket==0;
// Use lo,hi to record a range for unpaired brackets;
class Solution {
public:
    bool checkValidString(string s) {
        int lo = 0; 
        int hi = 0;
        for(auto it : s) {
            if(it == '(') {
                lo++;
                hi++;
            } else if(it == ')') {
                lo = max(0, lo - 1);
                hi--;
                if(hi < 0) return false;
            } else if (it == '*'){
                lo = max(lo - 1, 0);
                hi++;
            };
        }
        return lo <= 0;
    }
};
```



#### [1021. Remove Outermost Parentheses](https://leetcode-cn.com/problems/remove-outermost-parentheses/)

A valid parentheses string is either empty `""`, `"(" + A + ")"`, or `A + B`, where `A` and `B` are valid parentheses strings, and `+` represents string concatenation.

- For example, `""`, `"()"`, `"(())()"`, and `"(()(()))"` are all valid parentheses strings.

A valid parentheses string `s` is primitive if it is nonempty, and there does not exist a way to split it into `s = A + B`, with `A` and `B` nonempty valid parentheses strings. Given a valid parentheses string `s`, consider its primitive decomposition: `s = P1 + P2 + ... + Pk`, where `Pi` are primitive valid parentheses strings. Return `s` *after removing the outermost parentheses of every primitive string in the primitive decomposition of* `s`.

**Example 1:**

```c++
Input: s = "(()())(())"
Output: "()()()"
Explanation: 
The input string is "(()())(())", with primitive decomposition "(()())" + "(())".
After removing outer parentheses of each part, this is "()()" + "()" = "()()()".
```

```c++
class Solution {
public:
    string removeOuterParentheses(string S) {
        int left_bracket = 1;
        string ans = "";
        for (int i = 1; i < S.size(); ++i){
            if (S[i] == '(') left_bracket++;
            else if (S[i] == ')') left_bracket--;;
            if (left_bracket > 0) ans.push_back(S[i]);
            else if(left_bracket <= 0) {
               ++i;
               left_bracket = 1;
            }
        }
        return ans;
    }
};
```

